/* ============================================
   Clipper UI - Dark Theme Styles
   Applied via data-theme="dark" attribute or media query fallback
   ============================================ */

/* ============================================
   Root & Base - Dark Theme
   ============================================ */
:root[data-theme="dark"] {
  color: #e9ecef;
  background-color: #1a1a1a;
}

/* ============================================
   Header & Navigation - Dark Theme
   ============================================ */
:root[data-theme="dark"] .app-header {
  background: #2d2d2d;
  border-color: #404040;
}

:root[data-theme="dark"] .app-title {
  color: #e9ecef;
}

:root[data-theme="dark"] .github-link {
  color: #adb5bd;
}

:root[data-theme="dark"] .github-link:hover {
  color: #e9ecef;
}

:root[data-theme="dark"] .refresh-button,
:root[data-theme="dark"] .settings-button,
:root[data-theme="dark"] .send-clipboard-button {
  background: #404040;
  border-color: #4a4a4a;
  color: #e9ecef;
}

:root[data-theme="dark"] .refresh-button:hover,
:root[data-theme="dark"] .settings-button:hover,
:root[data-theme="dark"] .send-clipboard-button:hover {
  background: #4a4a4a;
  color: #ffffff;
}

/* ============================================
   Filters Bar & Search - Dark Theme
   ============================================ */
:root[data-theme="dark"] .filters-bar,
:root[data-theme="dark"] .status-bar {
  background: #2d2d2d;
  border-color: #404040;
}

:root[data-theme="dark"] .search-box-label {
  color: #9ca3af;
}

:root[data-theme="dark"] .search-box-inner {
  background: #2d2d2d;
  border-color: #404040;
}

:root[data-theme="dark"] .search-box-inner:focus-within {
  border-color: #667eea;
}

:root[data-theme="dark"] .search-input,
:root[data-theme="dark"] .date-input {
  background: #2d2d2d;
  border-color: #404040;
  color: #e9ecef;
}

:root[data-theme="dark"] .search-box-inner .search-input {
  background: transparent;
}

:root[data-theme="dark"] .search-input:focus,
:root[data-theme="dark"] .date-input:focus {
  border-color: #667eea;
}

/* ============================================
   Toggle & Controls - Dark Theme
   ============================================ */
:root[data-theme="dark"] .toggle-switch {
  background: #404040;
}

:root[data-theme="dark"] .toggle-input:checked + .toggle-switch {
  background: #667eea;
}

:root[data-theme="dark"] .toggle-text,
:root[data-theme="dark"] .date-input-group label {
  color: #adb5bd;
}

:root[data-theme="dark"] .date-input-group-active {
  background-color: rgba(102, 126, 234, 0.15);
}

/* ============================================
   Scrollbar - Dark Theme
   ============================================ */
:root[data-theme="dark"] .app-main::-webkit-scrollbar-track {
  background: #2d2d2d;
}

:root[data-theme="dark"] .app-main::-webkit-scrollbar-thumb {
  background: #555555;
}

:root[data-theme="dark"] .app-main::-webkit-scrollbar-thumb:hover {
  background: #666666;
}

/* ============================================
   Clip Entry - Dark Theme
   ============================================ */
:root[data-theme="dark"] .clip-entry {
  background: #2d2d2d;
  border-color: #404040;
}

:root[data-theme="dark"] .clip-entry:hover {
  border-color: #667eea;
}

/* Suppress hover styles when keyboard navigation is active - dark mode */
:root[data-theme="dark"] .clip-list-container.keyboard-navigating .clip-entry:hover:not(.clip-entry-focused) {
  border-color: #404040;
  box-shadow: none;
}

/* Scroll container - dark mode */
:root[data-theme="dark"] .clip-list-container::-webkit-scrollbar-track {
  background: #2d2d2d;
}

:root[data-theme="dark"] .clip-list-container::-webkit-scrollbar-thumb {
  background: #4a4a4a;
}

:root[data-theme="dark"] .clip-list-container::-webkit-scrollbar-thumb:hover {
  background: #5a5a5a;
}

/* Scroll position indicator - dark mode */
:root[data-theme="dark"] .scroll-position-indicator {
  background: rgba(60, 60, 60, 0.9);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

/* Skeleton placeholder - dark mode */
:root[data-theme="dark"] .clip-entry-placeholder {
  background: #2d2d2d;
  border-color: #404040;
}

:root[data-theme="dark"] .skeleton-avatar,
:root[data-theme="dark"] .skeleton-line {
  background: #404040;
}

:root[data-theme="dark"] .placeholder-shimmer {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.08) 50%,
    transparent 100%
  );
}

/* Keyboard navigation focused state - dark mode */
:root[data-theme="dark"] .clip-entry.clip-entry-focused {
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.4);
}

/* Button focused state via keyboard navigation - dark mode */
:root[data-theme="dark"] .clip-entry .button-focused {
  outline: 2px solid #8b9cf7;
  outline-offset: 2px;
}

/* Button focus states - dark mode */
:root[data-theme="dark"] .copy-button:focus,
:root[data-theme="dark"] .share-button:focus,
:root[data-theme="dark"] .delete-button:focus,
:root[data-theme="dark"] .favorite-button:focus,
:root[data-theme="dark"] .expand-button:focus,
:root[data-theme="dark"] .notes-indicator:focus {
  outline-color: #8b9cf7;
}

/* Aging effect works the same in dark mode - just uses CSS variable */
:root[data-theme="dark"] .clip-entry.clip-entry-aging:hover {
  opacity: 1;
}

:root[data-theme="dark"] .clip-content {
  color: #e9ecef;
}

:root[data-theme="dark"] .expand-button {
  color: #6ea8fe;
}

:root[data-theme="dark"] .expand-button:hover {
  color: #9ec5fe;
}

/* Search Highlight - Dark Theme */
:root[data-theme="dark"] .clip-content mark {
  background-color: #665c00;
  color: #ffc107;
}

/* Language Selector - Dark Theme */
:root[data-theme="dark"] .language-selector-button {
  background: #363636;
  border-color: #4a4a4a;
  color: #e9ecef;
}

:root[data-theme="dark"] .language-selector-button:hover {
  background: #404040;
  border-color: #5a5a5a;
}

/* Date Tag - Dark Theme */
:root[data-theme="dark"] .date-tag {
  background: #363636;
  border-color: #4a4a4a;
  color: #e9ecef;
}

:root[data-theme="dark"] .date-tag:hover {
  background: #404040;
  border-color: #5a5a5a;
}

:root[data-theme="dark"] .date-tag-arrow {
  color: #e9ecef;
}

:root[data-theme="dark"] .date-tag-arrow:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #ffffff;
}

:root[data-theme="dark"] .date-tag-arrow:focus {
  outline-color: #8b9cf7;
  background: rgba(139, 156, 247, 0.2);
}

:root[data-theme="dark"] .language-selector-dropdown {
  background: #2d2d2d;
  border-color: #404040;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

:root[data-theme="dark"] .language-selector-option {
  color: #e9ecef;
}

:root[data-theme="dark"] .language-selector-option:hover {
  background: #363636;
}

:root[data-theme="dark"] .language-selector-option.selected {
  background: #667eea;
  color: white;
}

:root[data-theme="dark"] .language-selector-option.selected:hover {
  background: #5a6fd6;
}

:root[data-theme="dark"] .language-selector-option.highlighted {
  background: #363636;
}

:root[data-theme="dark"] .language-selector-option.selected.highlighted {
  background: #5a6fd6;
}

:root[data-theme="dark"] .clip-date,
:root[data-theme="dark"] .status-bar,
:root[data-theme="dark"] .header-status,
:root[data-theme="dark"] .clip-attachment {
  color: #adb5bd;
}

:root[data-theme="dark"] .clip-attachment {
  background: #363636;
}

:root[data-theme="dark"] .favorite-button {
  color: #404040;
}

:root[data-theme="dark"] .favorite-button.active {
  color: #ffc107;
}

/* ============================================
   Tags - Dark Theme
   ============================================ */
:root[data-theme="dark"] .tag {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

:root[data-theme="dark"] .clip-tags .tag-wrapper:nth-child(5n+1) .tag:not(.tag-add),
:root[data-theme="dark"] .clip-tags > .tag:not(.tag-add):nth-child(5n+1) {
  background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
}

:root[data-theme="dark"] .clip-tags .tag-wrapper:nth-child(5n+2) .tag:not(.tag-add),
:root[data-theme="dark"] .clip-tags > .tag:not(.tag-add):nth-child(5n+2) {
  background: linear-gradient(135deg, #d53f8c 0%, #e53e3e 100%);
}

:root[data-theme="dark"] .clip-tags .tag-wrapper:nth-child(5n+3) .tag:not(.tag-add),
:root[data-theme="dark"] .clip-tags > .tag:not(.tag-add):nth-child(5n+3) {
  background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
}

:root[data-theme="dark"] .clip-tags .tag-wrapper:nth-child(5n+4) .tag:not(.tag-add),
:root[data-theme="dark"] .clip-tags > .tag:not(.tag-add):nth-child(5n+4) {
  background: linear-gradient(135deg, #059669 0%, #047857 100%);
}

:root[data-theme="dark"] .clip-tags .tag-wrapper:nth-child(5n+5) .tag:not(.tag-add),
:root[data-theme="dark"] .clip-tags > .tag:not(.tag-add):nth-child(5n+5) {
  background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%);
}

:root[data-theme="dark"] .tag.tag-host {
  background: linear-gradient(135deg, #1565c0 0%, #0d47a1 100%) !important;
  color: white !important;
  border-color: #0d47a1 !important;
  box-shadow: 0 2px 4px rgba(13, 71, 161, 0.4) !important;
}

:root[data-theme="dark"] .tag.tag-host:hover {
  background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%) !important;
  color: white !important;
}

:root[data-theme="dark"] .tag.tag-clickable:hover {
  background: #7b93f5;
}

/* Add tag button - dark theme */
:root[data-theme="dark"] .tag.tag-add {
  background: transparent;
  color: #9ca3af;
  border-color: #4b5563;
}

:root[data-theme="dark"] .tag.tag-add:hover {
  background: #374151;
  color: #d1d5db;
  border-color: #6b7280;
}

/* Add tag inline input - dark theme */
:root[data-theme="dark"] .tag-add-input {
  background: #2d2d2d;
  color: #e9ecef;
  border-color: #7b93f5;
  box-shadow: 0 0 0 2px rgba(123, 147, 245, 0.15);
}

:root[data-theme="dark"] .tag-add-input:focus {
  border-color: #7b93f5;
  box-shadow: 0 0 0 2px rgba(123, 147, 245, 0.2);
}

:root[data-theme="dark"] .tag-add-input::placeholder {
  color: #6c757d;
}

/* Tag suggestions dropdown - dark theme */
:root[data-theme="dark"] .tag-suggestions {
  background: #2d2d2d;
  border-color: #404040;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

:root[data-theme="dark"] .tag-suggestion-item {
  color: #e9ecef;
}

:root[data-theme="dark"] .tag-suggestion-item:hover,
:root[data-theme="dark"] .tag-suggestion-item.selected {
  background: #404040;
}

/* Tag remove button - dark theme */
:root[data-theme="dark"] .tag-remove-btn {
  background: #e53935;
}

:root[data-theme="dark"] .tag-remove-btn:hover {
  background: #c62828;
}

/* ============================================
   Attachment & Buttons - Dark Theme
   ============================================ */
:root[data-theme="dark"] .attachment-name-button {
  color: #7b93f5;
}

:root[data-theme="dark"] .attachment-name-button:hover {
  color: #99aaf7;
}

:root[data-theme="dark"] .clear-button,
:root[data-theme="dark"] .clear-button.small {
  color: #adb5bd;
}

:root[data-theme="dark"] .clear-button:hover,
:root[data-theme="dark"] .clear-button.small:hover {
  color: #e9ecef;
}

/* ============================================
   Image Styles - Dark Theme
   ============================================ */
:root[data-theme="dark"] .clip-image-container {
  background: #363636;
}

:root[data-theme="dark"] .image-popup-container {
  background: #2d2d2d;
}

:root[data-theme="dark"] .image-popup-header {
  background: #363636;
  border-color: #404040;
}

:root[data-theme="dark"] .image-popup-filename {
  color: #e9ecef;
}

:root[data-theme="dark"] .image-popup-close {
  color: #adb5bd;
}

:root[data-theme="dark"] .image-popup-close:hover {
  background: #404040;
  color: #e9ecef;
}

/* ============================================
   Settings Dialog - Dark Theme
   ============================================ */
:root[data-theme="dark"] .settings-dialog {
  background: #2d2d2d;
}

:root[data-theme="dark"] .settings-header {
  border-color: #404040;
}

:root[data-theme="dark"] .settings-header h2 {
  color: #e9ecef;
}

:root[data-theme="dark"] .settings-close {
  color: #adb5bd;
}

:root[data-theme="dark"] .settings-close:hover {
  background: #404040;
  color: #e9ecef;
}

:root[data-theme="dark"] .settings-error {
  background: #4a2020;
  color: #f8a0a0;
}

:root[data-theme="dark"] .settings-section h3 {
  color: #adb5bd;
}

:root[data-theme="dark"] .settings-field label {
  color: #e9ecef;
}

:root[data-theme="dark"] .settings-select {
  background-color: #363636;
  border-color: #404040;
  color: #e9ecef;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23e9ecef' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
}

:root[data-theme="dark"] .settings-select:focus {
  border-color: #667eea;
}

:root[data-theme="dark"] .theme-option {
  background: #404040;
  border-color: #4a4a4a;
  color: #e9ecef;
}

:root[data-theme="dark"] .theme-option:hover {
  background: #4a4a4a;
  border-color: #5a5a5a;
}

:root[data-theme="dark"] .theme-option.active {
  border-color: #667eea;
  background: rgba(102, 126, 234, 0.2);
  color: #99aaf7;
}

:root[data-theme="dark"] .settings-hint {
  color: #adb5bd;
}

:root[data-theme="dark"] .settings-footer {
  border-color: #404040;
}

:root[data-theme="dark"] .settings-btn.secondary {
  background: #404040;
  border-color: #4a4a4a;
  color: #e9ecef;
}

:root[data-theme="dark"] .settings-btn.secondary:hover:not(:disabled) {
  background: #4a4a4a;
}

/* Settings Dialog with Tabs - Dark Theme */
:root[data-theme="dark"] .settings-tabs {
  background: #2d2d2d;
  border-color: #404040;
}

:root[data-theme="dark"] .settings-tab {
  color: #adb5bd;
}

:root[data-theme="dark"] .settings-tab:hover {
  color: #e9ecef;
}

:root[data-theme="dark"] .settings-tab.active {
  color: #99aaf7;
  border-bottom-color: #667eea;
}

:root[data-theme="dark"] .settings-tabs:focus .settings-tab.focused {
  outline-color: #99aaf7;
}

/* Settings About Tab Grid - Dark Theme */
:root[data-theme="dark"] .settings-about-label {
  color: #adb5bd;
}

:root[data-theme="dark"] .settings-about-value {
  color: #e9ecef;
}

:root[data-theme="dark"] .settings-update-available {
  color: #ffa94d;
}

:root[data-theme="dark"] .settings-update-uptodate {
  color: #69db7c;
}

:root[data-theme="dark"] .settings-error {
  color: #ff6b6b;
}

:root[data-theme="dark"] .share-button {
  color: #6c757d;
}

:root[data-theme="dark"] .share-button:hover {
  color: #99aaf7;
  background: rgba(102, 126, 234, 0.2);
}

:root[data-theme="dark"] .clip-action-separator {
  color: #4a4a4a;
}

:root[data-theme="dark"] .delete-button {
  background: #dc3545;
  color: white;
}

:root[data-theme="dark"] .delete-button:hover {
  background: #c82333;
}

:root[data-theme="dark"] .delete-confirm-dialog {
  background: #2d2d2d;
}

:root[data-theme="dark"] .delete-confirm-dialog p {
  color: #e9ecef;
}

:root[data-theme="dark"] .delete-confirm-btn.cancel {
  background: #404040;
  border-color: #4a4a4a;
  color: #e9ecef;
}

:root[data-theme="dark"] .delete-confirm-btn.cancel:hover:not(:disabled) {
  background: #4a4a4a;
}

:root[data-theme="dark"] .delete-confirm-dialog p.delete-confirm-note {
  color: #f5c2c7;
  background: #3d2020;
  border-color: #5c3030;
}

:root[data-theme="dark"] .delete-confirm-dialog .delete-confirm-tags {
  color: #f5c2c7;
  background: #3d2020;
  border-color: #5c3030;
}

:root[data-theme="dark"] .delete-confirm-checkbox {
  background: #3a3a3a;
  color: #e9ecef;
}

:root[data-theme="dark"] .delete-confirm-checkbox:hover {
  background: #454545;
}

/* ============================================
   Share Dialog - Dark Theme
   ============================================ */
:root[data-theme="dark"] .share-dialog {
  background: #2d2d2d;
}

:root[data-theme="dark"] .share-dialog-header {
  border-color: #404040;
}

:root[data-theme="dark"] .share-dialog-header h2 {
  color: #e9ecef;
}

:root[data-theme="dark"] .share-dialog-close {
  color: #adb5bd;
}

:root[data-theme="dark"] .share-dialog-close:hover {
  background: #404040;
  color: #e9ecef;
}

:root[data-theme="dark"] .share-dialog-error {
  background: #4a2020;
  color: #f8a0a0;
}

:root[data-theme="dark"] .share-dialog-loading {
  color: #adb5bd;
}

:root[data-theme="dark"] .share-dialog-spinner {
  border-color: #404040;
  border-top-color: #667eea;
}

:root[data-theme="dark"] .share-dialog-url-input {
  background: #363636;
  border-color: #404040;
  color: #e9ecef;
}

:root[data-theme="dark"] .share-dialog-url-input:focus {
  border-color: #667eea;
}

:root[data-theme="dark"] .share-dialog-hint {
  color: #adb5bd;
}

:root[data-theme="dark"] .share-dialog-footer {
  border-color: #404040;
}

:root[data-theme="dark"] .share-dialog-btn.secondary {
  background: #404040;
  border-color: #4a4a4a;
  color: #e9ecef;
}

:root[data-theme="dark"] .share-dialog-btn.secondary:hover {
  background: #4a4a4a;
}

:root[data-theme="dark"] .share-dialog-warning-text {
  color: #e9ecef;
}

:root[data-theme="dark"] .share-dialog-warning-note {
  color: #adb5bd;
}

:root[data-theme="dark"] .share-dialog-expiration {
  background: #2d2d2d;
}

:root[data-theme="dark"] .share-dialog-expiration label {
  color: #e5e7eb;
}

:root[data-theme="dark"] .share-dialog-expiration-select {
  background: #1a1a1a;
  border-color: #404040;
  color: #e5e7eb;
}

:root[data-theme="dark"] .share-dialog-expiration-select:hover {
  border-color: #525252;
}

:root[data-theme="dark"] .share-dialog-expiration-select:focus {
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

:root[data-theme="dark"] .share-dialog-sensitive-warning {
  background: #450a0a;
  border-color: #7f1d1d;
}

:root[data-theme="dark"] .share-dialog-sensitive-header {
  color: #fca5a5;
}

:root[data-theme="dark"] .share-dialog-sensitive-text {
  color: #fecaca;
}

:root[data-theme="dark"] .share-dialog-sensitive-list {
  color: #fca5a5;
}

/* ============================================
   Toast - Dark Theme
   ============================================ */
:root[data-theme="dark"] .toast {
  background: #2d2d2d;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

:root[data-theme="dark"] .toast-message {
  color: #e9ecef;
}

/* ============================================
   WebSocket Status - Dark Theme
   ============================================ */
:root[data-theme="dark"] .ws-connected .ws-status-text {
  color: #5cb85c;
}

:root[data-theme="dark"] .ws-disconnected .ws-status-text {
  color: #f8a0a0;
}

/* ============================================
   Connection Error - Dark Theme
   ============================================ */
:root[data-theme="dark"] .connection-error-icon {
  background: linear-gradient(135deg, #4a2020 0%, #5c2828 100%);
  color: #f87171;
}

:root[data-theme="dark"] .connection-error-title {
  color: #e9ecef;
}

:root[data-theme="dark"] .connection-error-description {
  color: #9ca3af;
}

:root[data-theme="dark"] .connection-error-reasons li {
  background: #363636;
  color: #e9ecef;
}

:root[data-theme="dark"] .connection-error-reasons .reason-icon {
  color: #6b7280;
}

:root[data-theme="dark"] .connection-error-details summary {
  background: #363636;
  color: #9ca3af;
}

:root[data-theme="dark"] .connection-error-details summary:hover {
  background: #404040;
}

:root[data-theme="dark"] .connection-error-details code {
  background: #1a1a1a;
  color: #f87171;
}

:root[data-theme="dark"] .connection-error-btn.secondary {
  background: #404040;
  color: #e9ecef;
  border-color: #4a4a4a;
}

:root[data-theme="dark"] .connection-error-btn.secondary:hover:not(:disabled) {
  background: #4a4a4a;
  border-color: #5a5a5a;
}

:root[data-theme="dark"] .connection-error-hint {
  color: #6b7280;
}

/* ============================================
   Media Query Fallback for Auto Theme
   Used when no explicit data-theme is set
   ============================================ */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    color: #e9ecef;
    background-color: #1a1a1a;
  }

  :root:not([data-theme="light"]) .app-header {
    background: #2d2d2d;
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .app-title {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .github-link {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .github-link:hover {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .refresh-button,
  :root:not([data-theme="light"]) .settings-button,
  :root:not([data-theme="light"]) .send-clipboard-button {
    background: #404040;
    border-color: #4a4a4a;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .refresh-button:hover,
  :root:not([data-theme="light"]) .settings-button:hover,
  :root:not([data-theme="light"]) .send-clipboard-button:hover {
    background: #4a4a4a;
    color: #ffffff;
  }

  :root:not([data-theme="light"]) .filters-bar,
  :root:not([data-theme="light"]) .status-bar {
    background: #2d2d2d;
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .search-box-label {
    color: #9ca3af;
  }

  :root:not([data-theme="light"]) .search-box-inner {
    background: #2d2d2d;
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .search-box-inner:focus-within {
    border-color: #667eea;
  }

  :root:not([data-theme="light"]) .search-input,
  :root:not([data-theme="light"]) .date-input {
    background: #2d2d2d;
    border-color: #404040;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .search-box-inner .search-input {
    background: transparent;
  }

  :root:not([data-theme="light"]) .search-input:focus,
  :root:not([data-theme="light"]) .date-input:focus {
    border-color: #667eea;
  }

  :root:not([data-theme="light"]) .toggle-switch {
    background: #404040;
  }

  :root:not([data-theme="light"]) .toggle-input:checked + .toggle-switch {
    background: #667eea;
  }

  :root:not([data-theme="light"]) .toggle-text,
  :root:not([data-theme="light"]) .date-input-group label {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .date-input-group-active {
    background-color: rgba(102, 126, 234, 0.15);
  }

  :root:not([data-theme="light"]) .clip-entry {
    background: #2d2d2d;
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .clip-entry:hover {
    border-color: #667eea;
  }

  /* Suppress hover styles when keyboard navigation is active - dark mode auto */
  :root:not([data-theme="light"]) .clip-list-container.keyboard-navigating .clip-entry:hover:not(.clip-entry-focused) {
    border-color: #404040;
    box-shadow: none;
  }

  /* Scroll container - dark mode auto */
  :root:not([data-theme="light"]) .clip-list-container::-webkit-scrollbar-track {
    background: #2d2d2d;
  }

  :root:not([data-theme="light"]) .clip-list-container::-webkit-scrollbar-thumb {
    background: #4a4a4a;
  }

  :root:not([data-theme="light"]) .clip-list-container::-webkit-scrollbar-thumb:hover {
    background: #5a5a5a;
  }

  /* Scroll position indicator - dark mode auto */
  :root:not([data-theme="light"]) .scroll-position-indicator {
    background: rgba(60, 60, 60, 0.9);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
  }

  /* Skeleton placeholder - dark mode auto */
  :root:not([data-theme="light"]) .clip-entry-placeholder {
    background: #2d2d2d;
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .skeleton-avatar,
  :root:not([data-theme="light"]) .skeleton-line {
    background: #404040;
  }

  :root:not([data-theme="light"]) .placeholder-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.08) 50%,
      transparent 100%
    );
  }

  /* Keyboard navigation focused state - dark mode auto */
  :root:not([data-theme="light"]) .clip-entry.clip-entry-focused {
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.4);
  }

  /* Button focused state via keyboard navigation - dark mode auto */
  :root:not([data-theme="light"]) .clip-entry .button-focused {
    outline: 2px solid #8b9cf7;
    outline-offset: 2px;
  }

  /* Button focus states - dark mode auto */
  :root:not([data-theme="light"]) .copy-button:focus,
  :root:not([data-theme="light"]) .share-button:focus,
  :root:not([data-theme="light"]) .delete-button:focus,
  :root:not([data-theme="light"]) .favorite-button:focus,
  :root:not([data-theme="light"]) .expand-button:focus,
  :root:not([data-theme="light"]) .notes-indicator:focus {
    outline-color: #8b9cf7;
  }

  :root:not([data-theme="light"]) .date-tag-arrow:focus {
    outline-color: #8b9cf7;
    background: rgba(139, 156, 247, 0.2);
  }

  :root:not([data-theme="light"]) .clip-content {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .expand-button {
    color: #6ea8fe;
  }

  :root:not([data-theme="light"]) .expand-button:hover {
    color: #9ec5fe;
  }

  /* Language Selector - Dark Theme Fallback */
  :root:not([data-theme="light"]) .language-selector-button {
    background: #363636;
    border-color: #4a4a4a;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .language-selector-button:hover {
    background: #404040;
    border-color: #5a5a5a;
  }

  :root:not([data-theme="light"]) .language-selector-dropdown {
    background: #2d2d2d;
    border-color: #404040;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  }

  :root:not([data-theme="light"]) .language-selector-option {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .language-selector-option:hover {
    background: #363636;
  }

  :root:not([data-theme="light"]) .language-selector-option.selected {
    background: #667eea;
    color: white;
  }

  :root:not([data-theme="light"]) .language-selector-option.highlighted {
    background: #363636;
  }

  :root:not([data-theme="light"]) .language-selector-option.selected.highlighted {
    background: #5a6fd6;
  }

  :root:not([data-theme="light"]) .clip-date,
  :root:not([data-theme="light"]) .status-bar,
  :root:not([data-theme="light"]) .header-status,
  :root:not([data-theme="light"]) .clip-attachment {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .tag {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
  }

  :root:not([data-theme="light"]) .clip-tags .tag-wrapper:nth-child(5n+1) .tag:not(.tag-add),
  :root:not([data-theme="light"]) .clip-tags > .tag:not(.tag-add):nth-child(5n+1) {
    background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
  }

  :root:not([data-theme="light"]) .clip-tags .tag-wrapper:nth-child(5n+2) .tag:not(.tag-add),
  :root:not([data-theme="light"]) .clip-tags > .tag:not(.tag-add):nth-child(5n+2) {
    background: linear-gradient(135deg, #d53f8c 0%, #e53e3e 100%);
  }

  :root:not([data-theme="light"]) .clip-tags .tag-wrapper:nth-child(5n+3) .tag:not(.tag-add),
  :root:not([data-theme="light"]) .clip-tags > .tag:not(.tag-add):nth-child(5n+3) {
    background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
  }

  :root:not([data-theme="light"]) .clip-tags .tag-wrapper:nth-child(5n+4) .tag:not(.tag-add),
  :root:not([data-theme="light"]) .clip-tags > .tag:not(.tag-add):nth-child(5n+4) {
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
  }

  :root:not([data-theme="light"]) .clip-tags .tag-wrapper:nth-child(5n+5) .tag:not(.tag-add),
  :root:not([data-theme="light"]) .clip-tags > .tag:not(.tag-add):nth-child(5n+5) {
    background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%);
  }

  :root:not([data-theme="light"]) .tag.tag-host {
    background: linear-gradient(135deg, #1565c0 0%, #0d47a1 100%) !important;
    color: white !important;
    border-color: #0d47a1 !important;
    box-shadow: 0 2px 4px rgba(13, 71, 161, 0.4) !important;
  }

  :root:not([data-theme="light"]) .tag.tag-host:hover {
    background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%) !important;
    color: white !important;
  }

  /* Add tag button - auto dark mode */
  :root:not([data-theme="light"]) .tag.tag-add {
    background: transparent;
    color: #9ca3af;
    border-color: #4b5563;
  }

  :root:not([data-theme="light"]) .tag.tag-add:hover {
    background: #374151;
    color: #d1d5db;
    border-color: #6b7280;
  }

  /* Add tag inline input - auto dark mode */
  :root:not([data-theme="light"]) .tag-add-input {
    background: #2d2d2d;
    color: #e9ecef;
    border-color: #7b93f5;
    box-shadow: 0 0 0 2px rgba(123, 147, 245, 0.15);
  }

  :root:not([data-theme="light"]) .tag-add-input:focus {
    border-color: #7b93f5;
    box-shadow: 0 0 0 2px rgba(123, 147, 245, 0.2);
  }

  :root:not([data-theme="light"]) .tag-add-input::placeholder {
    color: #6c757d;
  }

  /* Tag suggestions dropdown - auto dark mode */
  :root:not([data-theme="light"]) .tag-suggestions {
    background: #2d2d2d;
    border-color: #404040;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  }

  :root:not([data-theme="light"]) .tag-suggestion-item {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .tag-suggestion-item:hover,
  :root:not([data-theme="light"]) .tag-suggestion-item.selected {
    background: #404040;
  }

  /* Tag remove button - auto dark mode */
  :root:not([data-theme="light"]) .tag-remove-btn {
    background: #e53935;
  }

  :root:not([data-theme="light"]) .tag-remove-btn:hover {
    background: #c62828;
  }

  :root:not([data-theme="light"]) .clip-attachment {
    background: #363636;
  }

  :root:not([data-theme="light"]) .favorite-button {
    color: #404040;
  }

  :root:not([data-theme="light"]) .favorite-button.active {
    color: #ffc107;
  }

  :root:not([data-theme="light"]) .clear-button,
  :root:not([data-theme="light"]) .clear-button.small {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .clear-button:hover,
  :root:not([data-theme="light"]) .clear-button.small:hover {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .clip-image-container {
    background: #363636;
  }

  :root:not([data-theme="light"]) .image-popup-container {
    background: #2d2d2d;
  }

  :root:not([data-theme="light"]) .image-popup-header {
    background: #363636;
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .image-popup-filename {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .image-popup-close {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .image-popup-close:hover {
    background: #404040;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .attachment-name-button {
    color: #7b93f5;
  }

  :root:not([data-theme="light"]) .attachment-name-button:hover {
    color: #99aaf7;
  }

  :root:not([data-theme="light"]) .settings-dialog {
    background: #2d2d2d;
  }

  :root:not([data-theme="light"]) .settings-header {
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .settings-header h2 {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .settings-close {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .settings-close:hover {
    background: #404040;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .settings-section h3 {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .settings-field label {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .settings-select {
    background-color: #363636;
    border-color: #404040;
    color: #e9ecef;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23e9ecef' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  }

  :root:not([data-theme="light"]) .settings-select:focus {
    border-color: #667eea;
  }

  :root:not([data-theme="light"]) .theme-option {
    background: #404040;
    border-color: #4a4a4a;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .theme-option:hover {
    background: #4a4a4a;
    border-color: #5a5a5a;
  }

  :root:not([data-theme="light"]) .theme-option.active {
    border-color: #667eea;
    background: rgba(102, 126, 234, 0.2);
    color: #99aaf7;
  }

  :root:not([data-theme="light"]) .settings-hint {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .settings-footer {
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .settings-btn.secondary {
    background: #404040;
    border-color: #4a4a4a;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .settings-btn.secondary:hover:not(:disabled) {
    background: #4a4a4a;
  }

  :root:not([data-theme="light"]) .share-button {
    color: #6c757d;
  }

  :root:not([data-theme="light"]) .share-button:hover {
    color: #99aaf7;
    background: rgba(102, 126, 234, 0.2);
  }

  :root:not([data-theme="light"]) .clip-action-separator {
    color: #4a4a4a;
  }

  :root:not([data-theme="light"]) .delete-confirm-dialog {
    background: #2d2d2d;
  }

  :root:not([data-theme="light"]) .delete-confirm-dialog p {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .delete-confirm-btn.cancel {
    background: #404040;
    border-color: #4a4a4a;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .delete-confirm-btn.cancel:hover:not(:disabled) {
    background: #4a4a4a;
  }

  :root:not([data-theme="light"]) .delete-confirm-dialog p.delete-confirm-note {
    color: #f5c2c7;
    background: #3d2020;
    border-color: #5c3030;
  }

  :root:not([data-theme="light"]) .delete-confirm-dialog .delete-confirm-tags {
    color: #f5c2c7;
    background: #3d2020;
    border-color: #5c3030;
  }

  :root:not([data-theme="light"]) .delete-confirm-checkbox {
    background: #3a3a3a;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .delete-confirm-checkbox:hover {
    background: #454545;
  }

  /* Share dialog dark mode fallback */
  :root:not([data-theme="light"]) .share-dialog {
    background: #2d2d2d;
  }

  :root:not([data-theme="light"]) .share-dialog-header {
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .share-dialog-header h2 {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .share-dialog-close {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .share-dialog-close:hover {
    background: #404040;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .share-dialog-error {
    background: #4a2020;
    color: #f8a0a0;
  }

  :root:not([data-theme="light"]) .share-dialog-loading {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .share-dialog-spinner {
    border-color: #404040;
    border-top-color: #667eea;
  }

  :root:not([data-theme="light"]) .share-dialog-url-input {
    background: #363636;
    border-color: #404040;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .share-dialog-url-input:focus {
    border-color: #667eea;
  }

  :root:not([data-theme="light"]) .share-dialog-hint {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .share-dialog-footer {
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .share-dialog-btn.secondary {
    background: #404040;
    border-color: #4a4a4a;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .share-dialog-btn.secondary:hover {
    background: #4a4a4a;
  }

  :root:not([data-theme="light"]) .share-dialog-warning-text {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .share-dialog-warning-note {
    color: #adb5bd;
  }

  :root:not([data-theme="light"]) .share-dialog-expiration {
    background: #2d2d2d;
  }

  :root:not([data-theme="light"]) .share-dialog-expiration label {
    color: #e5e7eb;
  }

  :root:not([data-theme="light"]) .share-dialog-expiration-select {
    background: #1a1a1a;
    border-color: #404040;
    color: #e5e7eb;
  }

  :root:not([data-theme="light"]) .share-dialog-expiration-select:hover {
    border-color: #525252;
  }

  :root:not([data-theme="light"]) .share-dialog-expiration-select:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
  }

  :root:not([data-theme="light"]) .share-dialog-sensitive-warning {
    background: #450a0a;
    border-color: #7f1d1d;
  }

  :root:not([data-theme="light"]) .share-dialog-sensitive-header {
    color: #fca5a5;
  }

  :root:not([data-theme="light"]) .share-dialog-sensitive-text {
    color: #fecaca;
  }

  :root:not([data-theme="light"]) .share-dialog-sensitive-list {
    color: #fca5a5;
  }

  /* Toast dark mode fallback */
  :root:not([data-theme="light"]) .toast {
    background: #2d2d2d;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  }

  :root:not([data-theme="light"]) .toast-message {
    color: #e9ecef;
  }

  /* Scrollbar dark mode fallback */
  :root:not([data-theme="light"]) .app-main::-webkit-scrollbar-track {
    background: #2d2d2d;
  }

  :root:not([data-theme="light"]) .app-main::-webkit-scrollbar-thumb {
    background: #555555;
  }

  :root:not([data-theme="light"]) .app-main::-webkit-scrollbar-thumb:hover {
    background: #666666;
  }

  /* WebSocket status dark mode fallback */
  :root:not([data-theme="light"]) .ws-connected .ws-status-text {
    color: #5cb85c;
  }

  :root:not([data-theme="light"]) .ws-disconnected .ws-status-text {
    color: #f8a0a0;
  }

  /* Connection Error dark mode fallback */
  :root:not([data-theme="light"]) .connection-error-icon {
    background: linear-gradient(135deg, #4a2020 0%, #5c2828 100%);
    color: #f87171;
  }

  :root:not([data-theme="light"]) .connection-error-title {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .connection-error-description {
    color: #9ca3af;
  }

  :root:not([data-theme="light"]) .connection-error-reasons li {
    background: #363636;
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .connection-error-reasons .reason-icon {
    color: #6b7280;
  }

  :root:not([data-theme="light"]) .connection-error-details summary {
    background: #363636;
    color: #9ca3af;
  }

  :root:not([data-theme="light"]) .connection-error-details summary:hover {
    background: #404040;
  }

  :root:not([data-theme="light"]) .connection-error-details code {
    background: #1a1a1a;
    color: #f87171;
  }

  :root:not([data-theme="light"]) .connection-error-btn.secondary {
    background: #404040;
    color: #e9ecef;
    border-color: #4a4a4a;
  }

  :root:not([data-theme="light"]) .connection-error-btn.secondary:hover:not(:disabled) {
    background: #4a4a4a;
    border-color: #5a5a5a;
  }

  :root:not([data-theme="light"]) .connection-error-hint {
    color: #6b7280;
  }

  :root:not([data-theme="light"]) .settings-update-notes {
    background: #2a2a2a;
    border-color: #404040;
  }

  :root:not([data-theme="light"]) .settings-update-notes pre {
    color: #e9ecef;
  }

  :root:not([data-theme="light"]) .settings-notice {
    background: #433920;
    color: #fbbf24;
  }

  /* Tooltip dark mode fallback */
  :root:not([data-theme="light"]) .tooltip {
    background: #374151;
    color: #f9fafb;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  }

  :root:not([data-theme="light"]) .tooltip-arrow {
    background: #374151;
  }

  :root:not([data-theme="light"]) .notes-indicator {
    color: #99aaf7;
  }

  :root:not([data-theme="light"]) .notes-indicator:hover {
    color: #b3c0fa;
    background: rgba(102, 126, 234, 0.2);
  }

  :root:not([data-theme="light"]) .notes-indicator-empty {
    color: #6b7280;
  }

  :root:not([data-theme="light"]) .notes-indicator-empty:hover {
    color: #99aaf7;
  }

  /* Notes Popup - Dark Theme (implicit) */
  :root:not([data-theme="light"]) .notes-popup-dialog {
    background: #1f2937;
    border: 1px solid #374151;
  }

  :root:not([data-theme="light"]) .notes-popup-header h3 {
    color: #f3f4f6;
  }

  :root:not([data-theme="light"]) .notes-popup-input {
    background: #111827;
    border-color: #374151;
    color: #f3f4f6;
  }

  :root:not([data-theme="light"]) .notes-popup-input:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
  }

  :root:not([data-theme="light"]) .notes-popup-input::placeholder {
    color: #6b7280;
  }

  :root:not([data-theme="light"]) .notes-popup-btn.cancel {
    background: #374151;
    border-color: #4b5563;
    color: #f3f4f6;
  }

  :root:not([data-theme="light"]) .notes-popup-btn.cancel:hover:not(:disabled) {
    background: #4b5563;
  }

  :root:not([data-theme="light"]) .notes-popup-btn.clear {
    background: #450a0a;
    border-color: #7f1d1d;
    color: #fca5a5;
  }

  :root:not([data-theme="light"]) .notes-popup-btn.clear:hover:not(:disabled) {
    background: #7f1d1d;
    border-color: #991b1b;
  }
}

/* ============================================
   Tooltip - Dark Theme (explicit)
   ============================================ */
:root[data-theme="dark"] .tooltip {
  background: #374151;
  color: #f9fafb;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

:root[data-theme="dark"] .tooltip-arrow {
  background: #374151;
}

:root[data-theme="dark"] .notes-indicator {
  color: #99aaf7;
}

:root[data-theme="dark"] .notes-indicator:hover {
  color: #b3c0fa;
  background: rgba(102, 126, 234, 0.2);
}

:root[data-theme="dark"] .notes-indicator-empty {
  color: #6b7280;
}

:root[data-theme="dark"] .notes-indicator-empty:hover {
  color: #99aaf7;
}

/* Notes Popup - Dark Theme */
:root[data-theme="dark"] .notes-popup-dialog {
  background: #1f2937;
  border: 1px solid #374151;
}

:root[data-theme="dark"] .notes-popup-header h3 {
  color: #f3f4f6;
}

:root[data-theme="dark"] .notes-popup-input {
  background: #111827;
  border-color: #374151;
  color: #f3f4f6;
}

:root[data-theme="dark"] .notes-popup-input:focus {
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

:root[data-theme="dark"] .notes-popup-input::placeholder {
  color: #6b7280;
}

:root[data-theme="dark"] .notes-popup-btn.cancel {
  background: #374151;
  border-color: #4b5563;
  color: #f3f4f6;
}

:root[data-theme="dark"] .notes-popup-btn.cancel:hover:not(:disabled) {
  background: #4b5563;
}

:root[data-theme="dark"] .notes-popup-btn.clear {
  background: #450a0a;
  border-color: #7f1d1d;
  color: #fca5a5;
}

:root[data-theme="dark"] .notes-popup-btn.clear:hover:not(:disabled) {
  background: #7f1d1d;
  border-color: #991b1b;
}
